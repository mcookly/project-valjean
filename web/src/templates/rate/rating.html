{% extends "rate-base.html" %}
{% set active_page = "Rate" %}
{% block content %}
<script>
    $(document).ready(function() {
        $(".btn-check").click(function(e) {
            var value = this.value;
            var name = this.name;
            console.log("Clicked " + this.id); // debug
            for (let i=1; i<7; i++) {
                var btn = "#label-" + name + "-" + i;
                if (i === parseInt(value)) {
                    // Using toggleClass for simplicity.
                    $(btn).toggleClass("btn-outline-secondary btn-secondary");
                } else {
                    // This requires a manual add-remove.
                    $(btn).removeClass("btn-secondary");
                    $(btn).addClass("btn-outline-secondary");
                }
            }
        });
    });
</script>
<form action="{{ url_for('submit_ratings', dh=dh, meal=meal) }}" class="text-center" method="POST">
    {% for cat in food.keys() %}
    <div class="flex-row rate-form shadow">
        <legend class="big-legend" for="{{ cat }}Cat">{{ cat }}</legend>
        {% for food_item in food[cat] %}
        <div class="flex-row form-padding">
            <legend for="{{ food_item }}Item">{{ food_item }}</legend>
        </div>
        <div class="flex-row form-padding">
            {% for i in range(1,6) %}
            <!-- name = dict key, value = dict value -->
            <input class="btn-check" type="radio" value="{{ i }}" id="{{ cat }}-{{ food_item }}-{{ i }}" name="{{cat}}-{{ food_item }}" autocomplete="off">
            <label id="label-{{ cat }}-{{ food_item }}-{{ i }}" class="btn btn-rate btn-outline-secondary" for="{{ cat }}-{{ food_item }}-{{ i }}">{{ i }}</label>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
    {% endfor %}
    <button type="submit" class="btn btn-form btn-block btn-secondary btn-rounded">Rate</button>
</form>
{% endblock %}